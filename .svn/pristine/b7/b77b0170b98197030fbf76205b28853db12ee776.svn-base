C51 COMPILER V9.52.0.0   MAIN                                                              10/19/2017 17:07:44 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE USER\main.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(.\USER\IIC;.\USER\UART
                    -;.\USER\TM1618;.\USER\Sensor;.\USER;.\USER\PWM;.\USER\DC_MOTOR;.\USER\timer;.\USER\inc;.\USER\EXINT;.\USER\touch_key;.\U
                    -SER\SYS_RUN;.\USER\step_motor;.\USER\BUZZER;.\USER\UART;.\USER\common;.\USER\lib;.\USER\UV;.\USER\ION;.\USER\EEPROM;.\US
                    -ER\TM1620;.\USER\charge) DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <stdio.h>
   2          #include "IIC.h"
   3          //#include "TM1618.h"
   4          #include "TM1620.h"
   5          #include "sensor.h"
   6          #include "SOFT_IIC.h"
   7          #include "PWM.h"
   8          #include "dc_motor.h"
   9          #include "timer.h"
  10          #include "global.h"
  11          #include "INT1.h"
  12          #include "step_motor.h"
  13          #include "sys_run.h"
  14          #include "buzzer.h"
  15          #include "wifi_uart.h"
  16          #include "debug_uart.h"
  17          #include "soft_uart.h"
  18          #include "ADC.h"
  19          #include "UV.h"
  20          #include "ION.h"
  21          #include "global.h"
  22          #include "EEPROM.h"
  23          #include "charge.h"
  24          #include "UART0.h"
  25          
  26          
  27          /*
  28          sprintfÐè×¢ÒâµÄµØ·½£º
  29          1.¸ñÊ½»¯ÕûÊýÊ±£¬±ØÐë´«²Î unsigned int ¸ñÊ½
  30          */
  31          /*
  32          ³ÌÐòÐè×¢ÒâÎÊÌâ£º
  33          1.ÔÚÊ¹ÓÃlongÀàÐÍºÍºê¶¨ÒåÊ±ÈÝÒ×³öÏÖÎÊÌâ£¬¼ÆËã½á¹û²»¶Ô£¬ÈçÏÂÊ¾Àý
  34          #define TEST_NUM   60000
  35          unsigned long temp = 0;
  36          temp = TEST_NUM + 10000;
  37          
  38          ¼ÆËã½á¹û±¾Ó¦¸ÃÊÇ70000 = 0x11170,µ«ÊÇÊµ¼ÊÔËËã³öÀ´µÄ½á¹ûÊÇ0xffff1170¡£
  39          ºê¶¨ÒåµÄÊýÖµÈç¹ûÐ¡ÓÚ0xFFFF,ÓÃ¸Ãºê¶¨ÒåµÄÖµºÍÒ»¸öÐ¡ÓÚ0xFFFFµÄÊýÔËËã£¬Èç¹û½á¹û³¬¹ý0xFFFF£¬Ôò³öÏÖ´íÎó½á¹û¡£×ö³
             -Ë·¨ÔËËãÒ»Ñù´æÔÚÕâÑùµÄÎÊÌâ
  40          µ«ÊÇÈç¹û¶¨Òå 
  41          #define TEST_NUM   70000  
  42          ¼´ºê¶¨ÒåµÄÊýÖµ³¬¹ý 0xFFFF£¬¼ÆËã½á¹ûÊÇÕýÈ·µÄ¡£
  43          
  44          Èç¹ûÖ±½ÓÊ¹ÓÃ temp = 60000 + 10000; Ö±½ÓÊ¹ÓÃÊý×Ö½øÐÐ¼ÆËãÃ»ÓÐÎÊÌâ
  45          
  46          
  47          ½â¾ö°ì·¨£º
  48          temp = (TEST_NUM | 0x00) + 10000;  
  49          ÕâÖÖÔËËã½á¹ûÕýÈ·
  50          
  51          
C51 COMPILER V9.52.0.0   MAIN                                                              10/19/2017 17:07:44 PAGE 2   

  52          */
  53          
  54          
  55          void main(void)
  56          {
  57   1      
  58   1        unsigned long times_1s = 0;
  59   1      
  60   1        unsigned char res = 0;
  61   1      
  62   1      
  63   1        TM1620_Init();
  64   1        
  65   1        Key_IIC_PinConifg();
  66   1        Start_Timer1();
  67   1        Start_INT1();
  68   1      
  69   1        
  70   1        PWM_Init();
  71   1        PWM_Control(PWM7_NUM,PWM_ON);
  72   1      
  73   1        
  74   1        
  75   1        Step_Motor_Pin_Init();
  76   1        Buzzer_PinConfig();
  77   1        SENSOR_IIC_PinConifg();
  78   1        Soft_UART_Init();
  79   1      #ifdef WIFI_SOFT_IIC
                Wifi_Uart_Init();
              #else
  82   1        init_UART0();
  83   1      #endif 
  84   1        DEBUG_Uart_Init();
  85   1        UV_Pin_Init();
  86   1        ION_Pin_Init();
  87   1      
  88   1      
  89   1          
  90   1        EA = 1;                //Enable all inierrupt
  91   1        
  92   1        Buzzer_Power_On();
  93   1        TM1620_DispalyData(SENSOR_PM25,0);
  94   1        TM1820_LED_Control(LED_ALL,LED_OFF);
  95   1        TM1820_LED_Control(LED_POWER,LED_ON);
  96   1        TM1820_LED_Control(LED_SLEEP_MODE,LED_ON);
  97   1        //ADCstart(d_ADC_CH0_IN);
  98   1        
  99   1        //ÎªÁË±£Ö¤°²È«Æô¶¯±ØÐë½øÐÐ²ÖÃÅ¼ì²â£¬²ÖÃÅÈç¹û»µÁËÔò°´¼üÊ§Ð§
 100   1        sys_init_check();
 101   1        
 102   1        charge_init();
 103   1        
 104   1        while(1)
 105   1        {
 106   2         
 107   2            if(_test_timeflag(g_1min_flag))
 108   2            { 
 109   3                g_1min_flag = 0;
 110   3                    
 111   3            }
 112   2            
 113   2            if(_test_timeflag(g_1s_flag))
C51 COMPILER V9.52.0.0   MAIN                                                              10/19/2017 17:07:44 PAGE 3   

 114   2            {
 115   3                g_1s_flag = 0;
 116   3                times_1s++;
 117   3              
 118   3                display_pm_data();    
 119   3      
 120   3                Check_If_Close_Door();        
 121   3            }
 122   2        
 123   2            if(_test_timeflag(g_1ms_flag))
 124   2            {
 125   3                g_1ms_flag = 0;
 126   3                sys_run();
 127   3                DirectMotor();       
 128   3            }  
 129   2      
 130   2            if(_test_timeflag(g_2ms_flag))
 131   2            {
 132   3                g_2ms_flag = 0;
 133   3                TurnMotor();
 134   3            }        
 135   2            
 136   2            if(_test_timeflag(g_10ms_flag))
 137   2            {
 138   3                g_10ms_flag = 0;
 139   3                Scan_TouchPad();                 
 140   3            }   
 141   2      
 142   2            if(_test_timeflag(g_100ms_flag))
 143   2            {
 144   3                g_100ms_flag = 0;
 145   3                Dcmoto_adj();   
 146   3                UV_Check();  
 147   3                Deal_Wifi_Uart_Data();        
 148   3            }
 149   2            
 150   2            get_charge_info();
 151   2            
 152   2            if(cost_info.IsSelfChargeMode == 1)
 153   2            {  
 154   3                //µ±MCUºÍWIFIÄ£¿éÁ¬ÐøÍ¨Ñ¶´íÎó´ïµ½Ò»¶¨´ÎÊýºó£¬¿ÉÄÜÊÇwifiÄ£¿éÎÞ·¨Õý³£¹¤×÷ÁË£¬´ËÊ±MCU½øÈë×Ô¼Æ·ÑÄ£Ê½
             -£¬Ö±µ½°Ñ·ÑÓÃÊ±¼äÓÃÍê
 155   3                mcu_self_charge();
 156   3            }
 157   2           
 158   2        }
 159   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    270    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       5
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
